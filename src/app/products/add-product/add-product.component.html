<form #addForm="ngForm" id="addForm" (ngSubmit)="add(addForm)" enctype="multipart/form-data">
  <div class="form-group">
    <label for="name">Nombre</label>
    <input type="text" class="form-control" id="name" name="name" ngModel required #nameInput="ngModel" [ngClass]="{ 'is-invalid': nameInput.invalid && nameInput.touched }" />
    <small *ngIf="nameInput.invalid && nameInput.touched" class="error-msg">
      <span *ngIf="nameInput.errors?.['required']">El nombre es obligatorio.</span>
    </small>
  </div>

  <div class="form-group">
    <label for="description">Descripción</label>
    <textarea
      class="form-control"
      id="description"
      ngModel
      name="description"
      required
      #descriptionInput="ngModel"
      [ngClass]="{ 'is-invalid': descriptionInput.invalid && descriptionInput.touched }"
    >
    </textarea>
    <small *ngIf="descriptionInput.invalid && descriptionInput.touched" class="error-msg">
      <span *ngIf="descriptionInput.errors?.['required']">La descripción es obligatoria.</span>
    </small>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="form-group">
        <label for="stock">Stock</label>
        <input
          type="number"
          class="form-control"
          id="stock"
          min="1"
          ngModel
          name="stock"
          required
          #stockInput="ngModel"
          [ngClass]="{ 'is-invalid': stockInput.invalid && stockInput.touched }"
        />
        <small *ngIf="stockInput.invalid && stockInput.touched" class="error-msg">
          <span *ngIf="stockInput.errors?.['required']">El stock es obligatorio.</span>
        </small>
      </div>
    </div>

    <div class="col-md-4">
      <div class="form-group">
        <label for="minimumStock">Stock minimo</label>
        <input
          type="number"
          class="form-control"
          id="minimumStock"
          min="1"
          ngModel
          name="minimumStock"
          required
          #minimumStockInput="ngModel"
          [ngClass]="{ 'is-invalid': minimumStockInput.invalid && minimumStockInput.touched }"
        />
        <small *ngIf="minimumStockInput.invalid && minimumStockInput.touched" class="error-msg">
          <span *ngIf="minimumStockInput.errors?.['required']">El stock mínimo es obligatorio.</span>
        </small>
      </div>
    </div>

    <div class="col-md-4">
      <div class="form-group">
        <label for="precio">Precio</label>
        <input
          type="text"
          class="form-control"
          id="price"
          min="1"
          ngModel
          name="price"
          required
          #priceInput="ngModel"
          [ngClass]="{ 'is-invalid': priceInput.invalid && priceInput.touched }"
        />
        <small *ngIf="priceInput.invalid && priceInput.touched" class="error-msg">
          <span *ngIf="priceInput.errors?.['required']">El precio es obligatorio.</span>
        </small>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label for="category">Categoria</label>
        <select
          class="form-control"
          id="category"
          ngModel
          name="category"
          required
          #categoryInput="ngModel"
          [ngClass]="{ 'is-invalid': categoryInput.invalid && categoryInput.touched }"
        >
          <option disabled selected value="">Seleccione una categoria</option>
          <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
        </select>
        <small *ngIf="categoryInput.invalid && categoryInput.touched" class="error-msg">
          <span>La categoría es obligatoria.</span>
        </small>
      </div>
    </div>

    <div class="col-md-6">
      <div class="form-group">
        <label for="supplier">Proveedor</label>
        <select
          class="form-control"
          id="supplier"
          ngModel
          name="supplier"
          required
          #supplierInput="ngModel"
          [ngClass]="{ 'is-invalid': supplierInput.invalid && supplierInput.touched }"
        >
          <option disabled selected value="">Seleccione un proveedor</option>
          <option *ngFor="let supplier of suppliers" [value]="supplier.id">{{ supplier.cuit + ' ' + supplier.businessName }}</option>
        </select>
        <small *ngIf="supplierInput.invalid && supplierInput.touched" class="error-msg">
          <span>El proveedor es obligatorio.</span>
        </small>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="image">Imagen</label>
    <div class="img-group">
      <input type="file" id="image" name="image" (change)="onImageSelected($event)" accept="image/*" required hidden />
      <label for="image" class="upload-label"> Selecciona una imagen </label>
      <img *ngIf="imagePreviewUrl" [src]="imagePreviewUrl" alt="Imagen seleccionada" style="max-width: 200px; margin-top: 10px" />
    </div>
  </div>

  <div class="d-flex justify-content-center">
    <button type="submit" class="gral-button" form="addForm" [disabled]="addForm.invalid">Guardar</button>
  </div>
</form>
