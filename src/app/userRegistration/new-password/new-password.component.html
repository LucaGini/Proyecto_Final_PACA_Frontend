<form #resetPasswordForm="ngForm" novalidate (ngSubmit)="ResetPassword(resetPasswordForm)">
  <!-- Password -->
  <div class="mx-auto">
    <div class="form-group">
      <label for="password">Contraseña</label>
      <div class="input-group flex-column">
        <div class="d-flex align-items-center">
          <input
            autocomplete="new-password"
            [type]="showPassword ? 'text' : 'password'"
            class="form-control"
            id="password"
            name="password"
            [(ngModel)]="passwordValue"
            required
            pattern="^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*._-])[A-Za-z\d!@#$%^&*._-]{8,}$"
            #passwordInput="ngModel"
            [ngClass]="{ 'is-invalid': passwordInput.invalid && passwordInput.touched }"
          />
          <span class="input-group-text" (click)="togglePasswordVisibility()" style="cursor: pointer">
            <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
        </div>
        <small *ngIf="passwordInput.invalid && passwordInput.touched" class="error-msg">
          <span *ngIf="passwordInput.errors?.['required']">La contraseña es requerida.</span>
          <span *ngIf="passwordInput.errors?.['pattern']" class="pattern-error"> La contraseña debe tener al menos 8 caracteres, incluyendo una mayúscula, un número y un carácter especial. </span>
        </small>
      </div>
    </div>

    <!-- Confirm Password -->
    <div class="form-group">
      <label for="password2">Verificar contraseña</label>
      <div class="input-group flex-column">
        <div class="d-flex align-items-center">
          <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control" id="password2" name="password2" [(ngModel)]="password2Value" required #password2Input="ngModel" [ngClass]="{ 'is-invalid': password2Input.invalid && password2Input.touched }" />
          <span class="input-group-text" (click)="toggleConfirmPasswordVisibility()" style="cursor: pointer">
            <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
        </div>
        <small *ngIf="password2Input.invalid && password2Input.touched" class="error-msg">
          <span *ngIf="password2Input.errors?.['required']">La verificación de contraseña es requerida.</span>
        </small>
      </div>
    </div>
  </div>

  <!-- Submit -->
  <div class="d-flex flex-column align-items-center">
    <button type="submit" class="gral-button" [disabled]="resetPasswordForm.invalid">Aceptar</button>
  </div>
</form>
