<form #loginForm="ngForm" (ngSubmit)="login(loginForm)">
  <div class="col-md-6 mx-auto">
    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" class="form-control" id="email" name="email" [(ngModel)]="email" required email #emailInput="ngModel" [ngClass]="{ 'is-invalid': emailInput.invalid && emailInput.touched }" />
      <small *ngIf="emailInput.invalid && emailInput.touched" class="error-msg">
        <span *ngIf="emailInput.errors?.['required']">El email es requerido.</span>
        <span *ngIf="emailInput.errors?.['email']">El email debe tener un formato válido.</span>
      </small>
    </div>
  </div>

  <div class="col-md-6 mx-auto">
    <div class="form-group mb-4">
      <label for="password">Contraseña</label>
      <div class="input-group flex-column">
        <div class="d-flex align-items-center">
          <input
            [type]="showPassword ? 'text' : 'password'"
            class="form-control"
            id="password"
            name="password"
            [(ngModel)]="password"
            required
            #passwordInput="ngModel"
            [ngClass]="{
              'is-invalid': (passwordInput.invalid && passwordInput.touched) || isPasswordIncorrect
            }"
          />
          <span class="input-group-text" (click)="togglePasswordVisibility()" style="cursor: pointer">
            <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
        </div>
        <small *ngIf="passwordInput.invalid && passwordInput.touched" class="error-msg">
          <span *ngIf="passwordInput.errors?.['required']">La contraseña es requerida.</span>
        </small>
      </div>
    </div>
    <div class="mb-4">
      <a href="/reset-password" class="btn-link font-small">¿Olvidaste tu contraseña?</a>
    </div>
  </div>

  <div class="d-flex flex-column align-items-center">
    <re-captcha #captchaRef (resolved)="onCaptchaResolved($event)" siteKey="6Ld1vp0rAAAAAC7PNqnpJlclDZENU7DVWV-djyAq"> </re-captcha>

    <button type="submit" class="gral-button mt-3" id="logIn" [disabled]="loginForm.invalid || !captchaToken">Iniciar Sesión</button>
  </div>
</form>
