<div *ngIf="weeklyRoutes" class="vrp-container">
  <div *ngIf="selectedOrderNumbers.size > 0" class="mb-3 p-2 bg-light border rounded">
    <p>{{ selectedOrderNumbers.size }} órdenes seleccionadas</p>
    <button (click)="updateSelectedOrders('completed')" class="btn-completed">
      Completadas
    </button>
    <button (click)="updateSelectedOrders('rescheduled')" class="btn-rescheduled">
      Reprogramadas
    </button>
  </div>

  <div *ngFor="let province of getProvinces()" class="card mb-3">
    <div class="card-header">
      <h4>{{ province | titlecase }}</h4>
    </div>
    <div class="card-body p-0">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th></th>
            <th>Orden</th>
            <th>Cliente</th>
            <th>Total</th>
            <th>Dirección</th>
            <th>Estado</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let route of weeklyRoutes?.routesByProvince?.[province]?.route; trackBy: trackByRouteId"
              [class.table-primary]="isSelected(route)">
            <td>
              <input *ngIf="route?.status === 'in distribution'"  type="checkbox"  class="form-check-input custom-checkbox" 
                [checked]="isSelected(route)" [attr.name]="'order_' + route.orderNumber"  (change)="toggleSelection(route)" />
            </td>
            <td class="order-number">#{{ route?.orderNumber }}</td>
            <td>{{ route?.firstName }} {{ route?.lastName }}</td>
            <td class="text-success">${{ route?.total }}</td>
            <td class="address">{{ route?.address }}</td>
            <td><strong>{{ route?.status }}</strong></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
